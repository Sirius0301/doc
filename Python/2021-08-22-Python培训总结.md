# Python 培训总结-第一部分

近期参加了公司组织的Python 培训课程，为期10周，每周六从早9点到下午4点。需要讲解内容:

- Python 程序设计基础
- Python 核心编程
- Python 框架开发
- Python 网络爬虫技术
- Scrapy 网络爬虫框架
- Python 数据预处理与分析
- 数据挖掘算法
- Python 数据挖掘

虽课程如此，但老师讲解似乎并不是按照课表，目前上了三节课，老师分别讲述了

- Python 部分基础, 第一个案例是利用`aiohttp` 和 `jinja2`实现的网页，使用mysql 作为数据库，实现简单的CRUD 操作
- 网络socket 通信
- 利用`request`和`beautifulsoup4`实现爬虫代码
- 简单介绍了`django`使用

案例通过架构图和流程图来讲解，原理和思路很清晰，简单易懂。基础部分可能后面就不会再涉及，因此总结下第一部分的内容。

?> 如下总结与代码运行环境均为Mac 环境，推荐开发个人使用mac 或着linux 作为开发机器，原因就是真香

## Python 基础

Python 是一门解释型，弱类型的语言，因此也是需要单独安装解释器来执行python文件(.py)， 官方下载安装程序和通过`brew install python`的方式，使用的解释器都是`CPython`

Python 既可面向过程，也可面向对象编程，本文中我们使用`python 3.9` 和 [Pycharm](https://www.jetbrains.com/pycharm/download/#section=mac) 学习python

- 安装 `python`: `brew install python@3.9` 
- 安装 [Pycharm](https://www.jetbrains.com/pycharm/download/#section=mac)

### Pycharm 使用简单介绍

![image-20210822183011470](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822183011470.png)

1. 设置

   preference 中推荐设置 `python interpreter` 即该工程使用的虚拟环境，mac 上其实预装了 `python2` ，然而本工程使用`python3` 另外虚拟环境也类似 java 工程中的 `gradle warpper`，只不过需要初始化工程的时候手动设置。

   好处如下:

   - 和本机`python`以及其他依赖包版本隔离，确保程序可以单独运行
   - 删除当前工程文件夹即删除所有安装，保持本机开发环境干净
   - 将本工程所有 package & version 写入`requirement.txt` 即可让协作者简单配置当前工程环境
   - 开源项目和大多数python 程序员会采用的配置

   ![image-20210822183737510](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822183737510.png)

2. 新建工程

   <img src="https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822184937033.png" alt="image-20210822184937033" style="zoom:25%;" />

3. Git信息

   学习或着个人开发过程中，建议养成良好的习惯，通过`git`管理自己代码，便于回溯，重构，后期总结整理。甚至可以不配置远程，便于自己反思与总结。

   ![image-20210822185026410](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822185026410.png)

4. Commit 信息

   建议在 pycharm 中安装 `Git Commit Template`，规范化提交自己的 commit 信息，亦符合开源项目commit 规范

   ![image-20210822185204774](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822185204774.png)

   <img src="https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822185102597.png" alt="image-20210822185102597" style="zoom:50%;" />

5. Terminal

   方便你想运行一些`shel`命令

   ![image-20210822185402773](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822185402773.png)

6. Python Packages

   便于你查看已安装对应package信息

   ![image-20210822185602680](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822185602680.png)

7. Python Console

   一个让你和python 编程愉快玩耍的地方

   ![image-20210822185957960](https://gitee.com/sirius_wang_wf/typora/raw/master/images/image-20210822185957960.png)

### Python 基础

由于Python 是一门动态语言，所以对应变量不需要预定义。 另外，python通过 **行间代码对齐** 和 **换行** 来区分代码块，并***不需要***分号和花括号。所以，尤其***注意的你的代码缩进和换行***。

Python 函数或代码块开始那一行的末尾必须有 `:`标识，通过换行切换代码块即可

#### 输入与输出

```python
# 这是输出
print(3000)

# 这是输入
str = input()
```

#### 基本数据类型

Python支持多种数据类型，在计算机内部，可以把任何数据都看成一个“对象”，而变量就是在程序中用来指向这些数据对象的，对变量赋值就是把数据和变量给关联起来。

对变量赋值`x = y`是把变量`x`指向真正的对象，该对象是变量`y`所指向的。随后对变量`y`的赋值*不影响*变量`x`的指向。

注意：Python的整数没有大小限制，而某些语言的整数根据其存储长度是有大小限制的，例如Java对32位整数的范围限制在`-2147483648`-`2147483647`。

Python的浮点数也没有大小限制，但是超出一定范围就直接表示为`inf`（无限大）

- 整数：Python可以处理任意大小的整数，当然包括负整数，在程序中的表示方法和数学上的写法一模一样，例如：`1`，`100`，`-8080`，`0`，等。由于计算机使用二进制，所以，有时候用十六进制表示整数比较方便，十六进制用`0x`前缀和0-9，a-f表示，例如：`0xff00`，`0xa5b4c3d2`，等。对于很大的数，例如`10000000000`，很难数清楚0的个数。Python允许在数字中间以`_`分隔，因此，写成`10_000_000_000`和`10000000000`是完全一样的。十六进制数也可以写成`0xa1b2_c3d4`

- 浮点数：浮点数可以用数学写法，如`1.23`，`3.14`，`-9.01`，等等。但是对于很大或很小的浮点数，就必须用科学计数法表示，把10用e替代，1.23x109就是`1.23e9`，或者`12.3e8`，0.000012可以写成`1.2e-5`，等

- 布尔值：直接用`True`、`False`表示布尔值（请注意大小写），布尔值可以用`and`、`or`和`not`运算；and`运算是与运算，只有所有都为`True`，`and`运算结果才是`True`；or`运算是或运算，只要其中有一个为`True`，`or`运算结果就是`True;not运算是非运算，它是一个单目运算符，把`True`变成`False`，`False`变成`True`

- 空值：空值是Python里一个特殊的值，用`None`表示。`None`不能理解为`0`，因为`0`是有意义的，而`None`是一个特殊的空值

- 变量：变量名必须是大小写英文、数字和`_`的组合，且不能用数字开头

- 常量：Python中，通常用全部大写的变量名表示常量，但仅仅是人为约定其不变。

- 字符串：字符串是以单引号`'`或双引号`"`括起来的任意文本，比如`'abc'`，`"xyz"`等

  

  ```python
  print(123)
  # 123
  print(456.789)
  # 456.789
  print('Hello, Pretty')
  # Hello, Pretty
  print('Hello, \'Sirius\'')
  # Hello, 'Sirius'
  print(r'Hello, "Linda"')
  # Hello, "Linda"
  
  ```

- 字符串和编码

  - Python 3的字符串使用Unicode，直接支持多语言

  - 多行字符串`'''...'''`还可以在前面加上`r`使用
  - 单个字符的编码，Python提供了`ord()`函数获取字符的整数表示，`chr()`函数把编码转换为对应的字符
  - 字符串格式化：在Python中，采用的格式化方式和C语言是一致的，用`%`实现

  ```python
  >>> print(r'''hello,
  		Lisa!''')
  hello,
  Lisa!
  >>> print('%2d-%02d' % (3, 1))
   3-01
  >>> print('%.2f' % 3.1415926)
   3.14
  >>> 'Age: %s. Gender: %s' % (25, True)
   'Age: 25. Gender: True'
  >>> 'growth rate: %d %%' % 7
   'growth rate: 7 %'
  ```

  - 格式化字符串 `format()` 和 `f-string`

  ```python
  >>> 'Hello, {0}, 成绩提升了 {1:.1f}%'.format('小明', 17.125)
  'Hello, 小明, 成绩提升了 17.1%'
  # 用传入的参数依次替换字符串内的占位符{0}、{1}
  >>> r = 2.5
  >>> s = 3.14 * r ** 2
  >>> print(f'The area of a circle with radius {r} is {s:.2f}')
  The area of a circle with radius 2.5 is 19.62
  # {r}被变量r的值替换，{s:.2f}被变量s的值替换，并且:后面的.2f指定了格式化参数（即保留两位小数），因此，{s:.2f}的替换结果是19.62
  ```

#### ***有序***列表与元组：list & tuple 

list和tuple是Python内置的有序集合，一个可变，一个不可变

- List: `list_example = []` 类似一维数组，不过长度可变，每个元素数据类型可变

  ```python
  >>> name = ['Bob', 'Cyan', 'Dove']
  >>> name
  ['Bob', 'Cyan', 'Dove']
  >>> name.append('Ellen')
  >>> name
  ['Bob', 'Cyan', 'Dove', 'Ellen']
  >>> name.insert(0, 'Alex')
  >>> name
  ['Alex', 'Bob', 'Cyan', 'Dove', 'Ellen']
  >>> name.pop()
  'Ellen'
  >>> name.pop(1)
  'Bob'
  >>> name
  ['Alex', 'Cyan', 'Dove']
  >>> name.remove('Cyan')
  >>> name
  ['Alex', 'Dove']
  >>> len(name)
  2
  ```

- Tuple: `name=('Alex', 'Bob', 'Cyan')` 一旦初始化，则不可修改

> 陷阱： 只有一个元素的 tuple 必须要加一个逗号
>
> t = (1, )

#### ***无序***字典和集合：dict & set 

使用key-value存储结构的dict在Python中非常有用，选择不可变对象作为key很重要，最常用的key是字符串

- dict: 全称dictionary，在其他语言中也称为map，使用键-值（key-value）存储，具有极快的查找速度 

  - dict提供的`get()`方法，如果key不存在，可以返回`None`，或者自己指定的value

  ```python
  >>> d = {'Michael': 95, 'Bob': 75, 'Tracy': 85}
  >>> d['Bob']
  75
  >>> d.get('Sirius', 100)
  100
  >>> d
  {'Michael': 95, 'Bob': 75, 'Tracy': 85}
  ```

- set: 是一组key的集合，但不存储value；且 key 不能重复

  ```python
  >>> s = set([1, 1, 2, 3, 3, 4])
  >>> s
  {1, 2, 3, 4}
  >>> s.add(5)
  >>> s
  {1, 2, 3, 4, 5}
  >>> s.remove(1)
  >>> s
  {2, 3, 4, 5}
  >>> s.add('Hi')
  >>> s
  {2, 3, 4, 5, 'Hi'}
  ```


#### 条件判断

条件判断可以让计算机自己做选择，Python的if...elif...else很灵活。

条件判断从上向下匹配，当满足条件时执行对应的块内语句，后续的elif和else都不再执行

```python
if <条件判断1>:
    <执行1>
elif <条件判断2>:
    <执行2>
elif <条件判断3>:
    <执行3>
else:
    <执行4>
```

#### 循环

Python的循环有两种，一种是for...in循环，依次把list或tuple中的每个元素迭代出来

```python
>>> for x in range(101):
>>>     sum = sum + x
>>> print(sum)
5050
>>> names = ['Alex', 'Bob', 'Cyan']
>>> for name in names:
>>>     print(name)
    
Alex
Bob
Cyan
```

第二种循环是while循环，只要条件满足，就不断循环，条件不满足时退出循环

```python
>>> sum = 0
>>> n = 99
>>> while n > 0:
>>>     sum = sum + 0
>>>     n = n-2
>>> print(sum)
0
```

`break` & `continue`

- `break`的作用是提前结束循环

  ```python
  >>> n = 1
  >>> while n <= 100:
  >>>     if n > 10: # while n=11, stop the loop
  >>>         break
  >>>     print(n)
  >>>     n = n + 1
  >>> print('END')
  1
  2
  3
  4
  5
  6
  7
  8
  9
  10
  END
  ```

- `continue`的作用是提前结束本轮循环，并直接开始下一轮循环

  ```python
  >>> n = 0
  >>> while n < 10:
  >>>     n = n + 1
  >>>     if n % 2 == 0: # if n is even, execute the next loop  
  >>>         continue # this loop is skipped, current n would not be printed
  >>>     print(n)
      
  1
  3
  5
  7
  9

